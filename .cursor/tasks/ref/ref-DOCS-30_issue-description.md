# イシュー #30 の Description

以下の内容を GitHub イシューの description にコピペしてください。

---

## 概要

親子イシュー構造で開発する際のブランチマージ戦略をドキュメント化し、コミット履歴を綺麗に保つためのワークフローを確立します。

## 背景

### 現在の問題

親子イシューで開発する際、以下のような問題が発生しています：

1. **子ブランチを親ブランチにマージした後、同じ子ブランチで作業を続けると履歴が汚くなる**
   ```
   子ブランチ → 親ブランチへマージ（1回目）
   ↓
   子ブランチで追加作業
   ↓
   子ブランチ → 親ブランチへ再マージ（2回目）
   ↓
   履歴が汚い！（コミット重複、複雑なマージグラフ）
   ```

2. **原因**
   - 親ブランチ側: マージコミット or squash で履歴が変わる
   - 子ブランチ側: 元の履歴を保持している
   - 結果: 同じ変更が異なるコミットハッシュで存在 → rebase しても重複

3. **影響**
   - 履歴が追いにくい
   - コードレビューが困難
   - git log が複雑で理解しにくい

## 目的

1. **マージ戦略の明確化**
   - 子ブランチマージ後の対応方法を2つのオプションとして提供
   - ケースバイケースで使い分けられる判断基準を提示

2. **ドキュメント化**
   - `.cursor/rules/git/merge-strategy.mdc` として追加
   - 実践的なコマンド例を含める
   - トラブルシューティングも記載

3. **既存ルールとの統合**
   - `@git/worktree.mdc`, `@git/commit.mdc`, `@git/issue.mdc` との連携
   - 一貫したワークフローの確立

## 提案する2つのオプション

### オプション1: 子ブランチを終了して新しいブランチを作る（推奨）

**使うケース**: 大きな機能をフェーズ分けする場合

```bash
# 子ブランチマージ後
cd /path/to/worktree/親ブランチ
git worktree add ../子ブランチ-phase2 -b 子ブランチ-phase2
```

**メリット**:
- 履歴が綺麗
- レビューしやすい
- 問題が起きない

### オプション2: 子ブランチを親に同期させる

**使うケース**: 同じブランチで作業を続けたい場合

```bash
# 子ブランチマージ後
cd /path/to/worktree/子ブランチ
git fetch origin 親ブランチ
git reset --hard origin/親ブランチ
```

**メリット**:
- ブランチが増えない
- シンプル
- 軽微な修正に最適

## 成果物

- [ ] `.cursor/rules/git/merge-strategy.mdc` の作成
- [ ] 実践的なコマンド例の追加
- [ ] トラブルシューティングセクションの追加
- [ ] 既存ルールとの整合性確認

## 関連イシュー

親イシュー: なし（独立したドキュメント整備）

## 参考

- `@git/worktree.mdc` - worktree による並列開発
- `@git/commit.mdc` - コミット時のルール
- `@cursor-tasks.mdc` - タスク管理ルール

